{% extends 'base.html' %}

{% block meta %}
<title>GoollMart</title>
<style>
    /* Style dasar halaman */
  body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
  h1 { color: #2c3e50; text-align: center; margin-bottom: 30px; }

  /* Box info header (NPM, Nama, Kelas) */
  .header-info { margin-bottom: 20px; background: #fff; padding: 15px; border: 1px solid #ddd; border-radius: 6px; }

  /* Card untuk tiap produk */
  .product-card { background: #fff; border: 1px solid #ddd; border-radius: 6px; padding: 15px; margin-bottom: 20px; }
  .product-card img { max-width: 200px; height: auto; margin-top: 10px; border-radius: 4px; }

  /* Tombol */
  .btn { background: #2c3e50; color: white; padding: 6px 12px; border: none; border-radius: 4px; text-decoration: none; cursor: pointer; display: inline-block; margin-top: 10px; }
  .btn:hover { background: #34495e; }
</style>
{% endblock meta %}

{% block content %}
<h1>ðŸ›’ GoollMart</h1>

<!-- Header info -->
<div class="header-info">
  <p><b>NPM:</b> {{ npm }}</p>
  <p><b>Name:</b> {{ name }}</p>
  <p><b>Class:</b> {{ class }}</p>
  <a href="{% url 'main:create_product' %}" class="btn">+ Add Product</a>
</div>

<a href="{% url 'main:logout' %}">
  <button>Logout</button>
</a>

<h5>Sesi terakhir login: {{ last_login }}</h5>
<hr>
<!-- Tambahkan kode ini -->
<a href="?filter=all">
    <button type="button">All Products</button>
</a>
<a href="?filter=my">
    <button type="button">My Products</button>
</a> 

<!-- Daftar produk -->
{% if not products %}
  <p>Belum ada produk.</p>
{% else %}
  {% for product in products %}
    <div class="product-card">
      <h2>
        <a href="{% url 'main:show_product' product.id %}">
          {{ product.name }}
        </a>
      </h2>

      <!-- Info kategori & featured -->
      <p><b>{{ product.category }}</b>
      {% if product.is_featured %} | <b>Featured</b>{% endif %}</p>

      <!-- Info tanggal & views -->
      <p><i>Added: {{ product.created_at|date:"d M Y, H:i" }}</i> | Views: {{ product.views }}</p>

      <!-- Thumbnail -->
      {% if product.thumbnail %}
        <img src="{{ product.thumbnail }}" alt="thumbnail">
      {% endif %}

      <!-- Deskripsi singkat -->
      <p>{{ product.description|truncatewords:25 }}...</p>

      <!-- Tombol detail -->
      <a href="{% url 'main:show_product' product.id %}" class="btn">Detail</a>
    </div>
  {% endfor %}
{% endif %}
{% endblock content %}
